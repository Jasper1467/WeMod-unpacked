"use strict";(global.webpackChunkWeMod=global.webpackChunkWeMod||[]).push([[833],{39439:(e,n,t)=>{t.d(n,{_:()=>c});var i=t(70655),r=t(563),o=t(53665),a=t(90902),u=t(76766),l=t(75645),s=function(e){var n={};for(var t in e){var i=e[t];i&&(n[t]=i)}return n},c=function(){for(var e,n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];var o={},u=(0,r.l)(),l=void 0,s=(0,i.CR)(n,2),c=s[0],g=s[1];c&&"init"in c?(e=c,g&&(o=g)):c&&(o=c);var f=function(){return(0,i.mG)(void 0,void 0,void 0,(function(){var e,n,t;return(0,i.Jh)(this,(function(r){switch(r.label){case 0:return n={event_type:null!==(t=o.eventType)&&void 0!==t?t:"Page View"},e=[{}],[4,d()];case 1:return[2,(n.event_properties=i.pi.apply(void 0,[i.pi.apply(void 0,e.concat([r.sent()])),{page_domain:"undefined"!=typeof location&&location.hostname||"",page_location:"undefined"!=typeof location&&location.href||"",page_path:"undefined"!=typeof location&&location.pathname||"",page_title:"undefined"!=typeof document&&document.title||"",page_url:"undefined"!=typeof location&&location.href.split("?")[0]||""}]),n)]}}))}))},b=function(){return void 0===o.trackOn||"function"==typeof o.trackOn&&o.trackOn()},h=null,w=function(){return(0,i.mG)(void 0,void 0,void 0,(function(){var n,t,r;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return n=location.href,v(o.trackHistoryChanges,n,h||"")&&b()?(null==l||l.log("Tracking page view event"),null!=e?[3,1]:[3,3]):[3,4];case 1:return r=(t=e).track,[4,f()];case 2:r.apply(t,[i.sent()]),i.label=3;case 3:i.label=4;case 4:return h=n,[2]}}))}))},y={name:"page-view-tracking",type:a.z.ENRICHMENT,setup:function(n,t){return(0,i.mG)(void 0,void 0,void 0,(function(){var r,a,s,d,p;return(0,i.Jh)(this,(function(v){switch(v.label){case 0:return(e=null!=e?e:t)?((l=n.loggerProvider).log("Installing @amplitude/plugin-page-view-tracking-browser"),o.trackOn=(null===(d=n.attribution)||void 0===d?void 0:d.trackPageViews)?"attribution":o.trackOn,!t&&(null===(p=n.attribution)||void 0===p?void 0:p.trackPageViews)&&(l.warn("@amplitude/plugin-page-view-tracking-browser overrides page view tracking behavior defined in @amplitude/analytics-browser. Resolve by disabling page view tracking in @amplitude/analytics-browser."),n.attribution.trackPageViews=!1),o.trackHistoryChanges&&u&&(u.addEventListener("popstate",(function(){w()})),u.history.pushState=new Proxy(u.history.pushState,{apply:function(e,n,t){var r=(0,i.CR)(t,3),o=r[0],a=r[1],u=r[2];return w(),e.apply(n,[o,a,u])}})),b()?(l.log("Tracking page view event"),s=(a=e).track,[4,f()]):[3,2]):(r=c?"Options":"undefined",n.loggerProvider.error("Argument of type '".concat(r,"' is not assignable to parameter of type 'BrowserClient'.")),[2]);case 1:s.apply(a,[v.sent()]),v.label=2;case 2:return[2]}}))}))},execute:function(e){return(0,i.mG)(void 0,void 0,void 0,(function(){var n;return(0,i.Jh)(this,(function(t){switch(t.label){case 0:return"attribution"===o.trackOn&&p(e)?(null==l||l.log("Enriching campaign event to page view event with campaign parameters"),[4,f()]):[3,2];case 1:n=t.sent(),e.event_type=n.event_type,e.event_properties=(0,i.pi)((0,i.pi)({},e.event_properties),n.event_properties),t.label=2;case 2:return[2,e]}}))}))}};return y.__trackHistoryPageView=w,y},d=function(){return(0,i.mG)(void 0,void 0,void 0,(function(){var e;return(0,i.Jh)(this,(function(n){switch(n.label){case 0:return e=s,[4,(new o.q).parse()];case 1:return[2,e.apply(void 0,[n.sent()])]}}))}))},p=function(e){if("$identify"===e.event_type&&e.user_properties){var n=e.user_properties,t=n[u.h9.SET]||{},r=n[u.h9.UNSET]||{},o=(0,i.ev)((0,i.ev)([],(0,i.CR)(Object.keys(t)),!1),(0,i.CR)(Object.keys(r)),!1);return Object.keys(l.Lo).every((function(e){return o.includes(e)}))}return!1},v=function(e,n,t){return"pathOnly"===e?n.split("?")[0]!==t.split("?")[0]:n!==t}},18726:(e,n,t)=>{t.d(n,{h:()=>g});var i=t(70655),r=t(53665),o=t(90902),a=t(75645),u=t(14903),l=t(95656),s=t(77648),c=function(e,n,t){return void 0===n&&(n=""),void 0===t&&(t=10),[u.xp,n,e.substring(0,t)].filter(Boolean).join("_")},d=function(e){var n=e.split(".");return n.length<=2?e:n.slice(n.length-2,n.length).join(".")},p=function(e,n,t){e.referrer;var r,o=e.referring_domain,a=(0,i._T)(e,["referrer","referring_domain"]),u=n||{},l=(u.referrer,u.referring_domain),s=(0,i._T)(u,["referrer","referring_domain"]);if(e.referring_domain&&(null===(r=t.excludeReferrers)||void 0===r?void 0:r.includes(e.referring_domain)))return!1;var c=JSON.stringify(a)!==JSON.stringify(s),p=d(o||"")!==d(l||"");return!n||c||p},v=function(e,n){var t=(0,i.pi)((0,i.pi)({},a.Lo),e),r=Object.entries(t).reduce((function(e,t){var r,o=(0,i.CR)(t,2),a=o[0],u=o[1];return e.setOnce("initial_".concat(a),null!==(r=null!=u?u:n.initialEmptyValue)&&void 0!==r?r:"EMPTY"),u?e.set(a,u):e.unset(a)}),new l.h);return(0,s.O7)(r)},g=function(){for(var e,n,t=this,a=[],u=0;u<arguments.length;u++)a[u]=arguments[u];var l={},s=(0,i.CR)(a,2),d=s[0],g=s[1];d&&"init"in d?(n=d,g&&(l=g)):d&&(l=d);var f=null!==(e=l.excludeReferrers)&&void 0!==e?e:[];"undefined"!=typeof location&&f.unshift(location.hostname),l=(0,i.pi)((0,i.pi)({disabled:!1,initialEmptyValue:"EMPTY",resetSessionOnNewCampaign:!1},l),{excludeReferrers:f});var b={name:"web-attribution",type:o.z.BEFORE,setup:function(e,t){var o;return(0,i.mG)(this,void 0,void 0,(function(){var a,u,s,g,f,b,h,w;return(0,i.Jh)(this,(function(y){switch(y.label){case 0:return(n=null!=n?n:t)?l.disabled?(e.loggerProvider.log("@amplitude/plugin-web-attribution-browser is disabled. Attribution is not tracked."),[2]):(e.loggerProvider.log("Installing @amplitude/plugin-web-attribution-browser."),t||(null===(o=e.attribution)||void 0===o?void 0:o.disabled)||(e.loggerProvider.warn("@amplitude/plugin-web-attribution-browser overrides web attribution behavior defined in @amplitude/analytics-browser. Resolve by disabling web attribution tracking in @amplitude/analytics-browser."),e.attribution={disabled:!0}),u=e.cookieStorage,s=c(e.apiKey,"MKTG"),[4,Promise.all([(new r.q).parse(),u.get(s)])]):(a=d?"Options":"undefined",e.loggerProvider.error("Argument of type '".concat(a,"' is not assignable to parameter of type 'BrowserClient'.")),[2]);case 1:return g=i.CR.apply(void 0,[y.sent(),2]),f=g[0],b=g[1],(null!=(h=this.__pluginEnabledOverride)?h:p(f,b,l))&&(l.resetSessionOnNewCampaign&&(n.setSessionId(Date.now()),e.loggerProvider.log("Created a new session for new campaign.")),e.loggerProvider.log("Tracking attribution."),w=v(f,l),n.track(w),u.set(s,f)),[2]}}))}))},execute:function(e){return(0,i.mG)(t,void 0,void 0,(function(){return(0,i.Jh)(this,(function(n){return[2,e]}))}))},__pluginEnabledOverride:void 0};return b}}}]);