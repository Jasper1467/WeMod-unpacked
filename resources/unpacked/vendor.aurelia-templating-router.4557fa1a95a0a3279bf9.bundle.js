"use strict";(global.webpackChunkWeMod=global.webpackChunkWeMod||[]).push([[6073],{"aurelia-templating-router":(t,e,o)=>{o.d(e,{configure:()=>g});var n=o(86433),i=o(81383),r=o(98627),u=o(51781),a=o(56158),s=o(6778),c=o(1015),l=o(98099),p=function(t,e){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])},p(t,e)},h=function(){},f=function(){function t(t,e,o,n,i,r,u){this.element=t,this.container=e,this.viewSlot=o,this.router=n,this.viewLocator=i,this.compositionTransaction=r,this.compositionEngine=u,this.router.registerViewPort(this,this.element.getAttribute("name")),"initialComposition"in r||(r.initialComposition=!0,this.compositionTransactionNotifier=r.enlist())}return t.inject=function(){return[c.SO.Element,a.W2,u.L3,n.F0,u.r7,u.P3,u.Zo]},t.prototype.created=function(t){this.owningView=t},t.prototype.bind=function(t,e){this.container.viewModel=t,this.overrideContext=e},t.prototype.process=function(t,e){var o=this,n=t,r=n.component,a=r.childContainer,s=r.viewModel,c=r.viewModelResource,l=c.metadata,p=r.router.currentInstruction.config,h=p.viewPorts&&p.viewPorts[n.name]||{};a.get(d)._notify(this);var f={viewModel:h.layoutViewModel||p.layoutViewModel||this.layoutViewModel,view:h.layoutView||p.layoutView||this.layoutView,model:h.layoutModel||p.layoutModel||this.layoutModel,router:n.component.router,childContainer:a,viewSlot:this.viewSlot},w=this.viewLocator.getViewStrategy(r.view||s);return w&&r.view&&w.makeRelativeTo(i.aP.get(r.router.container.viewModel.constructor).moduleId),l.load(a,c.value,null,w,!0).then((function(t){o.compositionTransactionNotifier||(o.compositionTransactionOwnershipToken=o.compositionTransaction.tryCapture()),(f.viewModel||f.view)&&(n.layoutInstruction=f);var i=u.iC.dynamic(o.element,s,t);if(n.controller=l.create(a,i),e)return null;o.swap(n)}))},t.prototype.swap=function(t){var e=this,o=t,n=o.controller,i=o.layoutInstruction,r=this.view,a=function(){var t=u.pL[e.swapOrder]||u.pL.after,o=e.viewSlot;t(o,r,(function(){return Promise.resolve(o.add(e.view))})).then((function(){e._notify()}))},c=function(t){n.automate(e.overrideContext,t);var o=e.compositionTransactionOwnershipToken;return o?o.waitForCompositionComplete().then((function(){return e.compositionTransactionOwnershipToken=null,a()})):a()};return i?(i.viewModel||(i.viewModel=new h),this.compositionEngine.createController(i).then((function(t){var o=t.view;return u._P.distributeView(n.view,t.slots||o.slots),t.automate((0,s.db)(i.viewModel),e.owningView),o.children.push(n.view),o||t})).then((function(t){return e.view=t,c(t)}))):(this.view=n.view,c(this.owningView))},t.prototype._notify=function(){var t=this.compositionTransactionNotifier;t&&(t.done(),this.compositionTransactionNotifier=null)},t.$view=null,t.$resource={name:"router-view",bindables:["swapOrder","layoutView","layoutViewModel","layoutModel","inherit-binding-context"]},t}(),d=function(){function t(){var t=this;this.promise=new Promise((function(e){return t.resolve=e}))}return t.prototype.findNearest=function(){return this.promise},t.prototype._notify=function(t){this.resolve(t)},t}(),w=function(){};(0,u.Rs)("<template></template>")(w);var v=function(t){function e(e){var o=t.call(this)||this;return o.compositionEngine=e,o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function o(){this.constructor=t}p(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}(e,t),e.prototype.resolveViewModel=function(t,e){return new Promise((function(o,n){var a;if("moduleId"in e){var s=e.moduleId;return null===s?a=w:(s=(0,r.ri)(s,i.aP.get(t.container.viewModel.constructor).moduleId),a=/\.html/i.test(s)?function(t){var e=/([^\/^\?]+)\.html/i.exec(t)[1],o=function(){function t(){}return t.prototype.bind=function(t){this.$parent=t},t}();return(0,u.Mo)(e)(o),(0,u.Pl)(t)(o),o}(s):s),o(a)}n(new Error('Invalid route config. No "moduleId" found.'))}))},e.prototype.createChildContainer=function(t){var e=t.container.createChild();return e.registerSingleton(d),e.getChildRouter=function(){var o;return e.registerHandler(n.F0,(function(){return o||(o=t.createChild(e))})),e.get(n.F0)},e},e.prototype.loadRoute=function(t,e,o){var n=this;return this.resolveViewModel(t,e).then((function(o){return n.compositionEngine.ensureViewModel({viewModel:o,childContainer:n.createChildContainer(t),view:e.view||e.viewStrategy,router:t})}))},e.inject=[u.Zo],e}(n.b8),m=l.jl("route-href"),y=function(){function t(t,e){this.router=t,this.element=e,this.attribute="href"}return t.inject=function(){return[n.F0,c.SO.Element]},t.prototype.bind=function(){this.isActive=!0,this.processChange()},t.prototype.unbind=function(){this.isActive=!1},t.prototype.attributeChanged=function(t,e){return e&&this.element.removeAttribute(e),this.processChange()},t.prototype.processChange=function(){var t=this;return this.router.ensureConfigured().then((function(){if(!t.isActive)return null;var e=t.element,o=t.router.generate(t.route,t.params);return e.au.controller?e.au.controller.viewModel[t.attribute]=o:e.setAttribute(t.attribute,o),null})).catch((function(t){m.error(t)}))},t.$resource={type:"attribute",name:"route-href",bindables:[{name:"route",changeHandler:"processChange",primaryProperty:!0},{name:"params",changeHandler:"processChange"},"attribute"]},t}();function g(t){t.singleton(n.b8,v).singleton(n.F0,n.WY).globalResources(f,y),t.container.registerAlias(n.F0,n.WY)}}}]);