"use strict";(global.webpackChunkWeMod=global.webpackChunkWeMod||[]).push([[1437],{"aurelia-dialog":(e,t,n)=>{n.r(t),n.d(t,{DefaultDialogSettings:()=>c,DialogConfiguration:()=>h,DialogController:()=>o.d,DialogService:()=>d,Renderer:()=>o.a,configure:()=>g,createDialogCancelError:()=>o.b,createDialogCloseError:()=>o.e});var o=n(96885),r=n(1015),i=n(56158),s=n(51781),c=function(){this.lock=!0,this.startingZIndex=1e3,this.centerHorizontalOnly=!1,this.rejectOnCancel=!1,this.ignoreTransitions=!1,this.restoreFocus=function(e){return e.focus()}},u={ux:function(){return n.e(2866).then(n.bind(n,32440)).then((function(e){return e.DialogRenderer}))},native:function(){return n.e(2866).then(n.bind(n,81472)).then((function(e){return e.NativeDialogRenderer}))}},l={"ux-dialog":function(){return n.e(2866).then(n.bind(n,50843)).then((function(e){return e.UxDialog}))},"ux-dialog-header":function(){return n.e(2866).then(n.bind(n,51287)).then((function(e){return e.UxDialogHeader}))},"ux-dialog-body":function(){return n.e(2866).then(n.bind(n,70778)).then((function(e){return e.UxDialogBody}))},"ux-dialog-footer":function(){return n.e(2866).then(n.bind(n,26889)).then((function(e){return e.UxDialogFooter}))},"attach-focus":function(){return n.e(2866).then(n.bind(n,71990)).then((function(e){return e.AttachFocus}))}},a=function(){return n.e(2866).then(n.bind(n,32010)).then((function(e){return e.default}))},h=function(){function e(e,t){var n=this;this.renderer="ux",this.cssText=a,this.resources=[],this.fwConfig=e,this.settings=e.container.get(c),t((function(){return n._apply()}))}return e.prototype._apply=function(){var e=this,t=this.renderer,n=this.cssText;return Promise.all(["string"==typeof t?u[t]():t,n?"string"==typeof n?n:n():""]).then((function(t){var n=t[0],i=t[1],s=e.fwConfig;return s.transient(o.a,n),i&&r.SO.injectStyles(i),Promise.all(e.resources.map((function(e){return l[e]()}))).then((function(e){s.globalResources(e)}))}))},e.prototype.useDefaults=function(){return this.useRenderer("ux").useCSS(a).useStandardResources()},e.prototype.useStandardResources=function(){return Object.keys(l).forEach(this.useResource,this),this},e.prototype.useResource=function(e){return this.resources.push(e),this},e.prototype.useRenderer=function(e,t){return this.renderer=e,t&&Object.assign(this.settings,t),this},e.prototype.useCSS=function(e){return this.cssText=e,this},e}();function f(e,t){return this.then((function(e){return e.wasCancelled?e:e.closeResult})).then(e,t)}var d=function(){function e(e,t,n){this.controllers=[],this.hasOpenDialog=!1,this.hasActiveDialog=!1,this.container=e,this.compositionEngine=t,this.defaultSettings=n}return e.prototype.validateSettings=function(e){if(!e.viewModel&&!e.view)throw new Error('Invalid Dialog Settings. You must provide "viewModel", "view" or both.')},e.prototype.createCompositionContext=function(e,t,n){return{container:e.parent,childContainer:e,bindingContext:null,viewResources:null,model:n.model,view:n.view,viewModel:n.viewModel,viewSlot:new s.L3(t,!0),host:t}},e.prototype.ensureViewModel=function(e){return"object"==typeof e.viewModel?Promise.resolve(e):this.compositionEngine.ensureViewModel(e)},e.prototype._cancelOperation=function(e){if(!e)return{wasCancelled:!0};throw(0,o.b)()},e.prototype.composeAndShowDialog=function(e,t){var n=this;return e.viewModel||(e.bindingContext={controller:t}),this.compositionEngine.compose(e).then((function(e){return t.controller=e,t.renderer.showDialog(t).then((function(){n.controllers.push(t),n.hasActiveDialog=n.hasOpenDialog=!!n.controllers.length}),(function(t){return e.viewModel&&(0,o.c)(e.viewModel,"deactivate"),Promise.reject(t)}))}))},e.prototype.createSettings=function(e){return"boolean"==typeof(e=Object.assign({},this.defaultSettings,e)).keyboard||e.keyboard||(e.keyboard=!e.lock),"boolean"!=typeof e.overlayDismiss&&(e.overlayDismiss=!e.lock),Object.defineProperty(e,"rejectOnCancel",{writable:!1,configurable:!0,enumerable:!0}),this.validateSettings(e),e},e.prototype.open=function(e){var t=this;void 0===e&&(e={});var n,r,i=(e=this.createSettings(e)).childContainer||this.container.createChild(),s=new Promise((function(e,t){n=e,r=t})),c=i.invoke(o.d,[e,n,r]);i.registerInstance(o.d,c),s.then((function(){p(t,c)}),(function(){p(t,c)}));var u,l=this.createCompositionContext(i,c.renderer.getDialogContainer(),c.settings);return(u=this.ensureViewModel(l).then((function(e){return!e.viewModel||(0,o.c)(e.viewModel,"canActivate",c.settings.model)})).then((function(e){return e?t.composeAndShowDialog(l,c).then((function(){return{controller:c,closeResult:s,wasCancelled:!1}})):t._cancelOperation(c.settings.rejectOnCancel)}))).whenClosed=f,u},e.prototype.closeAll=function(){return Promise.all(this.controllers.slice(0).map((function(e){return e.settings.rejectOnCancel?e.cancel().then((function(){return null})).catch((function(t){if(t.wasCancelled)return e;throw t})):e.cancel().then((function(t){return t.wasCancelled?e:null}))}))).then((function(e){return e.filter((function(e){return!!e}))}))},e.inject=[i.W2,s.Zo,c],e}();function p(e,t){var n=e.controllers.indexOf(t);-1!==n&&(e.controllers.splice(n,1),e.hasActiveDialog=e.hasOpenDialog=!!e.controllers.length)}function g(e,t){var n=null,o=new h(e,(function(e){n=e}));return"function"==typeof t?t(o):o.useDefaults(),n()}},96885:(e,t,n)=>{n.d(t,{a:()=>o,b:()=>r,c:()=>s,d:()=>c,e:()=>i});var o=function(){function e(){}return e.prototype.getDialogContainer=function(){throw new Error("DialogRenderer must implement getDialogContainer().")},e.prototype.showDialog=function(e){throw new Error("DialogRenderer must implement showDialog().")},e.prototype.hideDialog=function(e){throw new Error("DialogRenderer must implement hideDialog().")},e}();function r(e){var t=new Error("Operation cancelled.");return t.wasCancelled=!0,t.output=e,t}function i(e){var t=new Error;return t.wasCancelled=!1,t.output=e,t}function s(e,t,n){return"function"==typeof e[t]?new Promise((function(o){o(e[t](n))})).then((function(e){return null==e||e})):Promise.resolve(!0)}var c=function(){function e(e,t,n,o){this.resolve=n,this.reject=o,this.settings=t,this.renderer=e}return e.prototype.releaseResources=function(e){var t=this;return s(this.controller.viewModel||{},"deactivate",e).then((function(){return t.renderer.hideDialog(t)})).then((function(){t.controller.unbind()}))},e.prototype.cancelOperation=function(){if(!this.settings.rejectOnCancel)return{wasCancelled:!0};throw r()},e.prototype.ok=function(e){return this.close(!0,e)},e.prototype.cancel=function(e){return this.close(!1,e)},e.prototype.error=function(e){var t=this,n=i(e);return this.releaseResources(n).then((function(){t.reject(n)}))},e.prototype.close=function(e,t){var n=this;if(this.closePromise)return this.closePromise;var o={wasCancelled:!e,output:t};return this.closePromise=s(this.controller.viewModel||{},"canDeactivate",o).catch((function(e){return n.closePromise=void 0,Promise.reject(e)})).then((function(i){return i?n.releaseResources(o).then((function(){return!n.settings.rejectOnCancel||e?n.resolve(o):n.reject(r(t)),{wasCancelled:!1}})).catch((function(e){return n.closePromise=void 0,Promise.reject(e)})):(n.closePromise=void 0,n.cancelOperation())}))},e.inject=[o],e}()}}]);